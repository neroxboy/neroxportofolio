{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Header = void 0;\nconst Token = require(\"token-types\");\nconst util = require(\"../../common/Util\");\n/**\n * BASIC STRUCTURE\n */\nexports.Header = {\n  len: 6 * 4,\n  get: (buf, off) => {\n    const header = {\n      // word 0\n      signature: Buffer.from(buf).toString('latin1', off, off + 3),\n      // versionIndex number * 1000 (3.81 = 3810) (remember that 4-byte alignment causes this to take 4-bytes)\n      streamMinorVersion: util.getBitAllignedNumber(buf, off + 3, 0, 4),\n      streamMajorVersion: util.getBitAllignedNumber(buf, off + 3, 4, 4),\n      // word 1\n      frameCount: Token.UINT32_LE.get(buf, off + 4),\n      // word 2\n      maxLevel: Token.UINT16_LE.get(buf, off + 8),\n      sampleFrequency: [44100, 48000, 37800, 32000][util.getBitAllignedNumber(buf, off + 10, 0, 2)],\n      link: util.getBitAllignedNumber(buf, off + 10, 2, 2),\n      profile: util.getBitAllignedNumber(buf, off + 10, 4, 4),\n      maxBand: util.getBitAllignedNumber(buf, off + 11, 0, 6),\n      intensityStereo: util.isBitSet(buf, off + 11, 6),\n      midSideStereo: util.isBitSet(buf, off + 11, 7),\n      // word 3\n      titlePeak: Token.UINT16_LE.get(buf, off + 12),\n      titleGain: Token.UINT16_LE.get(buf, off + 14),\n      // word 4\n      albumPeak: Token.UINT16_LE.get(buf, off + 16),\n      albumGain: Token.UINT16_LE.get(buf, off + 18),\n      // word\n      lastFrameLength: Token.UINT32_LE.get(buf, off + 20) >>> 20 & 0x7FF,\n      trueGapless: util.isBitSet(buf, off + 23, 0)\n    };\n    header.lastFrameLength = header.trueGapless ? Token.UINT32_LE.get(buf, 20) >>> 20 & 0x7FF : 0;\n    return header;\n  }\n};","map":{"version":3,"names":["Object","defineProperty","exports","value","Header","Token","require","util","len","get","buf","off","header","signature","Buffer","from","toString","streamMinorVersion","getBitAllignedNumber","streamMajorVersion","frameCount","UINT32_LE","maxLevel","UINT16_LE","sampleFrequency","link","profile","maxBand","intensityStereo","isBitSet","midSideStereo","titlePeak","titleGain","albumPeak","albumGain","lastFrameLength","trueGapless"],"sources":["C:/Users/vanitas/node_modules/music-metadata/lib/musepack/sv7/StreamVersion7.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Header = void 0;\nconst Token = require(\"token-types\");\nconst util = require(\"../../common/Util\");\n/**\n * BASIC STRUCTURE\n */\nexports.Header = {\n    len: 6 * 4,\n    get: (buf, off) => {\n        const header = {\n            // word 0\n            signature: Buffer.from(buf).toString('latin1', off, off + 3),\n            // versionIndex number * 1000 (3.81 = 3810) (remember that 4-byte alignment causes this to take 4-bytes)\n            streamMinorVersion: util.getBitAllignedNumber(buf, off + 3, 0, 4),\n            streamMajorVersion: util.getBitAllignedNumber(buf, off + 3, 4, 4),\n            // word 1\n            frameCount: Token.UINT32_LE.get(buf, off + 4),\n            // word 2\n            maxLevel: Token.UINT16_LE.get(buf, off + 8),\n            sampleFrequency: [44100, 48000, 37800, 32000][util.getBitAllignedNumber(buf, off + 10, 0, 2)],\n            link: util.getBitAllignedNumber(buf, off + 10, 2, 2),\n            profile: util.getBitAllignedNumber(buf, off + 10, 4, 4),\n            maxBand: util.getBitAllignedNumber(buf, off + 11, 0, 6),\n            intensityStereo: util.isBitSet(buf, off + 11, 6),\n            midSideStereo: util.isBitSet(buf, off + 11, 7),\n            // word 3\n            titlePeak: Token.UINT16_LE.get(buf, off + 12),\n            titleGain: Token.UINT16_LE.get(buf, off + 14),\n            // word 4\n            albumPeak: Token.UINT16_LE.get(buf, off + 16),\n            albumGain: Token.UINT16_LE.get(buf, off + 18),\n            // word\n            lastFrameLength: (Token.UINT32_LE.get(buf, off + 20) >>> 20) & 0x7FF,\n            trueGapless: util.isBitSet(buf, off + 23, 0)\n        };\n        header.lastFrameLength = header.trueGapless ? (Token.UINT32_LE.get(buf, 20) >>> 20) & 0x7FF : 0;\n        return header;\n    }\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}