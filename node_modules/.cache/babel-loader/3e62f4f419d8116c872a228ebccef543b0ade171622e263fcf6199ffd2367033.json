{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.uploadingNecessaryImages = exports.uploadingNecessaryImagesOfProduct = exports.parseProductNode = exports.toProductNode = exports.parseOrderDetailsNode = exports.parseCollectionsNode = exports.parseCatalogNode = void 0;\nconst boom_1 = require(\"@hapi/boom\");\nconst crypto_1 = require(\"crypto\");\nconst WABinary_1 = require(\"../WABinary\");\nconst messages_media_1 = require(\"./messages-media\");\nconst parseCatalogNode = node => {\n  const catalogNode = (0, WABinary_1.getBinaryNodeChild)(node, 'product_catalog');\n  const products = (0, WABinary_1.getBinaryNodeChildren)(catalogNode, 'product').map(exports.parseProductNode);\n  const paging = (0, WABinary_1.getBinaryNodeChild)(catalogNode, 'paging');\n  return {\n    products,\n    nextPageCursor: paging ? (0, WABinary_1.getBinaryNodeChildString)(paging, 'after') : undefined\n  };\n};\nexports.parseCatalogNode = parseCatalogNode;\nconst parseCollectionsNode = node => {\n  const collectionsNode = (0, WABinary_1.getBinaryNodeChild)(node, 'collections');\n  const collections = (0, WABinary_1.getBinaryNodeChildren)(collectionsNode, 'collection').map(collectionNode => {\n    const id = (0, WABinary_1.getBinaryNodeChildString)(collectionNode, 'id');\n    const name = (0, WABinary_1.getBinaryNodeChildString)(collectionNode, 'name');\n    const products = (0, WABinary_1.getBinaryNodeChildren)(collectionNode, 'product').map(exports.parseProductNode);\n    return {\n      id,\n      name,\n      products,\n      status: parseStatusInfo(collectionNode)\n    };\n  });\n  return {\n    collections\n  };\n};\nexports.parseCollectionsNode = parseCollectionsNode;\nconst parseOrderDetailsNode = node => {\n  const orderNode = (0, WABinary_1.getBinaryNodeChild)(node, 'order');\n  const products = (0, WABinary_1.getBinaryNodeChildren)(orderNode, 'product').map(productNode => {\n    const imageNode = (0, WABinary_1.getBinaryNodeChild)(productNode, 'image');\n    return {\n      id: (0, WABinary_1.getBinaryNodeChildString)(productNode, 'id'),\n      name: (0, WABinary_1.getBinaryNodeChildString)(productNode, 'name'),\n      imageUrl: (0, WABinary_1.getBinaryNodeChildString)(imageNode, 'url'),\n      price: +(0, WABinary_1.getBinaryNodeChildString)(productNode, 'price'),\n      currency: (0, WABinary_1.getBinaryNodeChildString)(productNode, 'currency'),\n      quantity: +(0, WABinary_1.getBinaryNodeChildString)(productNode, 'quantity')\n    };\n  });\n  const priceNode = (0, WABinary_1.getBinaryNodeChild)(orderNode, 'price');\n  const orderDetails = {\n    price: {\n      total: +(0, WABinary_1.getBinaryNodeChildString)(priceNode, 'total'),\n      currency: (0, WABinary_1.getBinaryNodeChildString)(priceNode, 'currency')\n    },\n    products\n  };\n  return orderDetails;\n};\nexports.parseOrderDetailsNode = parseOrderDetailsNode;\nconst toProductNode = (productId, product) => {\n  const attrs = {};\n  const content = [];\n  if (typeof productId !== 'undefined') {\n    content.push({\n      tag: 'id',\n      attrs: {},\n      content: Buffer.from(productId)\n    });\n  }\n  if (typeof product.name !== 'undefined') {\n    content.push({\n      tag: 'name',\n      attrs: {},\n      content: Buffer.from(product.name)\n    });\n  }\n  if (typeof product.description !== 'undefined') {\n    content.push({\n      tag: 'description',\n      attrs: {},\n      content: Buffer.from(product.description)\n    });\n  }\n  if (typeof product.retailerId !== 'undefined') {\n    content.push({\n      tag: 'retailer_id',\n      attrs: {},\n      content: Buffer.from(product.retailerId)\n    });\n  }\n  if (product.images.length) {\n    content.push({\n      tag: 'media',\n      attrs: {},\n      content: product.images.map(img => {\n        if (!('url' in img)) {\n          throw new boom_1.Boom('Expected img for product to already be uploaded', {\n            statusCode: 400\n          });\n        }\n        return {\n          tag: 'image',\n          attrs: {},\n          content: [{\n            tag: 'url',\n            attrs: {},\n            content: Buffer.from(img.url.toString())\n          }]\n        };\n      })\n    });\n  }\n  if (typeof product.price !== 'undefined') {\n    content.push({\n      tag: 'price',\n      attrs: {},\n      content: Buffer.from(product.price.toString())\n    });\n  }\n  if (typeof product.currency !== 'undefined') {\n    content.push({\n      tag: 'currency',\n      attrs: {},\n      content: Buffer.from(product.currency)\n    });\n  }\n  if ('originCountryCode' in product) {\n    if (typeof product.originCountryCode === 'undefined') {\n      attrs['compliance_category'] = 'COUNTRY_ORIGIN_EXEMPT';\n    } else {\n      content.push({\n        tag: 'compliance_info',\n        attrs: {},\n        content: [{\n          tag: 'country_code_origin',\n          attrs: {},\n          content: Buffer.from(product.originCountryCode)\n        }]\n      });\n    }\n  }\n  if (typeof product.isHidden !== 'undefined') {\n    attrs['is_hidden'] = product.isHidden.toString();\n  }\n  const node = {\n    tag: 'product',\n    attrs,\n    content\n  };\n  return node;\n};\nexports.toProductNode = toProductNode;\nconst parseProductNode = productNode => {\n  const isHidden = productNode.attrs.is_hidden === 'true';\n  const id = (0, WABinary_1.getBinaryNodeChildString)(productNode, 'id');\n  const mediaNode = (0, WABinary_1.getBinaryNodeChild)(productNode, 'media');\n  const statusInfoNode = (0, WABinary_1.getBinaryNodeChild)(productNode, 'status_info');\n  const product = {\n    id,\n    imageUrls: parseImageUrls(mediaNode),\n    reviewStatus: {\n      whatsapp: (0, WABinary_1.getBinaryNodeChildString)(statusInfoNode, 'status')\n    },\n    availability: 'in stock',\n    name: (0, WABinary_1.getBinaryNodeChildString)(productNode, 'name'),\n    retailerId: (0, WABinary_1.getBinaryNodeChildString)(productNode, 'retailer_id'),\n    url: (0, WABinary_1.getBinaryNodeChildString)(productNode, 'url'),\n    description: (0, WABinary_1.getBinaryNodeChildString)(productNode, 'description'),\n    price: +(0, WABinary_1.getBinaryNodeChildString)(productNode, 'price'),\n    currency: (0, WABinary_1.getBinaryNodeChildString)(productNode, 'currency'),\n    isHidden\n  };\n  return product;\n};\nexports.parseProductNode = parseProductNode;\n/**\n * Uploads images not already uploaded to WA's servers\n */\nasync function uploadingNecessaryImagesOfProduct(product, waUploadToServer, timeoutMs = 30000) {\n  product = {\n    ...product,\n    images: product.images ? await (0, exports.uploadingNecessaryImages)(product.images, waUploadToServer, timeoutMs) : product.images\n  };\n  return product;\n}\nexports.uploadingNecessaryImagesOfProduct = uploadingNecessaryImagesOfProduct;\n/**\n * Uploads images not already uploaded to WA's servers\n */\nconst uploadingNecessaryImages = async (images, waUploadToServer, timeoutMs = 30000) => {\n  const results = await Promise.all(images.map(async img => {\n    if ('url' in img) {\n      const url = img.url.toString();\n      if (url.includes('.whatsapp.net')) {\n        return {\n          url\n        };\n      }\n    }\n    const {\n      stream\n    } = await (0, messages_media_1.getStream)(img);\n    const hasher = (0, crypto_1.createHash)('sha256');\n    const contentBlocks = [];\n    for await (const block of stream) {\n      hasher.update(block);\n      contentBlocks.push(block);\n    }\n    const sha = hasher.digest('base64');\n    const {\n      directPath\n    } = await waUploadToServer((0, messages_media_1.toReadable)(Buffer.concat(contentBlocks)), {\n      mediaType: 'product-catalog-image',\n      fileEncSha256B64: sha,\n      timeoutMs\n    });\n    return {\n      url: (0, messages_media_1.getUrlFromDirectPath)(directPath)\n    };\n  }));\n  return results;\n};\nexports.uploadingNecessaryImages = uploadingNecessaryImages;\nconst parseImageUrls = mediaNode => {\n  const imgNode = (0, WABinary_1.getBinaryNodeChild)(mediaNode, 'image');\n  return {\n    requested: (0, WABinary_1.getBinaryNodeChildString)(imgNode, 'request_image_url'),\n    original: (0, WABinary_1.getBinaryNodeChildString)(imgNode, 'original_image_url')\n  };\n};\nconst parseStatusInfo = mediaNode => {\n  const node = (0, WABinary_1.getBinaryNodeChild)(mediaNode, 'status_info');\n  return {\n    status: (0, WABinary_1.getBinaryNodeChildString)(node, 'status'),\n    canAppeal: (0, WABinary_1.getBinaryNodeChildString)(node, 'can_appeal') === 'true'\n  };\n};","map":{"version":3,"names":["Object","defineProperty","exports","value","uploadingNecessaryImages","uploadingNecessaryImagesOfProduct","parseProductNode","toProductNode","parseOrderDetailsNode","parseCollectionsNode","parseCatalogNode","boom_1","require","crypto_1","WABinary_1","messages_media_1","node","catalogNode","getBinaryNodeChild","products","getBinaryNodeChildren","map","paging","nextPageCursor","getBinaryNodeChildString","undefined","collectionsNode","collections","collectionNode","id","name","status","parseStatusInfo","orderNode","productNode","imageNode","imageUrl","price","currency","quantity","priceNode","orderDetails","total","productId","product","attrs","content","push","tag","Buffer","from","description","retailerId","images","length","img","Boom","statusCode","url","toString","originCountryCode","isHidden","is_hidden","mediaNode","statusInfoNode","imageUrls","parseImageUrls","reviewStatus","whatsapp","availability","waUploadToServer","timeoutMs","results","Promise","all","includes","stream","getStream","hasher","createHash","contentBlocks","block","update","sha","digest","directPath","toReadable","concat","mediaType","fileEncSha256B64","getUrlFromDirectPath","imgNode","requested","original","canAppeal"],"sources":["C:/Users/vanitas/node_modules/@whiskeysockets/baileys/lib/Utils/business.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.uploadingNecessaryImages = exports.uploadingNecessaryImagesOfProduct = exports.parseProductNode = exports.toProductNode = exports.parseOrderDetailsNode = exports.parseCollectionsNode = exports.parseCatalogNode = void 0;\nconst boom_1 = require(\"@hapi/boom\");\nconst crypto_1 = require(\"crypto\");\nconst WABinary_1 = require(\"../WABinary\");\nconst messages_media_1 = require(\"./messages-media\");\nconst parseCatalogNode = (node) => {\n    const catalogNode = (0, WABinary_1.getBinaryNodeChild)(node, 'product_catalog');\n    const products = (0, WABinary_1.getBinaryNodeChildren)(catalogNode, 'product').map(exports.parseProductNode);\n    const paging = (0, WABinary_1.getBinaryNodeChild)(catalogNode, 'paging');\n    return {\n        products,\n        nextPageCursor: paging\n            ? (0, WABinary_1.getBinaryNodeChildString)(paging, 'after')\n            : undefined\n    };\n};\nexports.parseCatalogNode = parseCatalogNode;\nconst parseCollectionsNode = (node) => {\n    const collectionsNode = (0, WABinary_1.getBinaryNodeChild)(node, 'collections');\n    const collections = (0, WABinary_1.getBinaryNodeChildren)(collectionsNode, 'collection').map(collectionNode => {\n        const id = (0, WABinary_1.getBinaryNodeChildString)(collectionNode, 'id');\n        const name = (0, WABinary_1.getBinaryNodeChildString)(collectionNode, 'name');\n        const products = (0, WABinary_1.getBinaryNodeChildren)(collectionNode, 'product').map(exports.parseProductNode);\n        return {\n            id,\n            name,\n            products,\n            status: parseStatusInfo(collectionNode)\n        };\n    });\n    return {\n        collections\n    };\n};\nexports.parseCollectionsNode = parseCollectionsNode;\nconst parseOrderDetailsNode = (node) => {\n    const orderNode = (0, WABinary_1.getBinaryNodeChild)(node, 'order');\n    const products = (0, WABinary_1.getBinaryNodeChildren)(orderNode, 'product').map(productNode => {\n        const imageNode = (0, WABinary_1.getBinaryNodeChild)(productNode, 'image');\n        return {\n            id: (0, WABinary_1.getBinaryNodeChildString)(productNode, 'id'),\n            name: (0, WABinary_1.getBinaryNodeChildString)(productNode, 'name'),\n            imageUrl: (0, WABinary_1.getBinaryNodeChildString)(imageNode, 'url'),\n            price: +(0, WABinary_1.getBinaryNodeChildString)(productNode, 'price'),\n            currency: (0, WABinary_1.getBinaryNodeChildString)(productNode, 'currency'),\n            quantity: +(0, WABinary_1.getBinaryNodeChildString)(productNode, 'quantity')\n        };\n    });\n    const priceNode = (0, WABinary_1.getBinaryNodeChild)(orderNode, 'price');\n    const orderDetails = {\n        price: {\n            total: +(0, WABinary_1.getBinaryNodeChildString)(priceNode, 'total'),\n            currency: (0, WABinary_1.getBinaryNodeChildString)(priceNode, 'currency'),\n        },\n        products\n    };\n    return orderDetails;\n};\nexports.parseOrderDetailsNode = parseOrderDetailsNode;\nconst toProductNode = (productId, product) => {\n    const attrs = {};\n    const content = [];\n    if (typeof productId !== 'undefined') {\n        content.push({\n            tag: 'id',\n            attrs: {},\n            content: Buffer.from(productId)\n        });\n    }\n    if (typeof product.name !== 'undefined') {\n        content.push({\n            tag: 'name',\n            attrs: {},\n            content: Buffer.from(product.name)\n        });\n    }\n    if (typeof product.description !== 'undefined') {\n        content.push({\n            tag: 'description',\n            attrs: {},\n            content: Buffer.from(product.description)\n        });\n    }\n    if (typeof product.retailerId !== 'undefined') {\n        content.push({\n            tag: 'retailer_id',\n            attrs: {},\n            content: Buffer.from(product.retailerId)\n        });\n    }\n    if (product.images.length) {\n        content.push({\n            tag: 'media',\n            attrs: {},\n            content: product.images.map(img => {\n                if (!('url' in img)) {\n                    throw new boom_1.Boom('Expected img for product to already be uploaded', { statusCode: 400 });\n                }\n                return {\n                    tag: 'image',\n                    attrs: {},\n                    content: [\n                        {\n                            tag: 'url',\n                            attrs: {},\n                            content: Buffer.from(img.url.toString())\n                        }\n                    ]\n                };\n            })\n        });\n    }\n    if (typeof product.price !== 'undefined') {\n        content.push({\n            tag: 'price',\n            attrs: {},\n            content: Buffer.from(product.price.toString())\n        });\n    }\n    if (typeof product.currency !== 'undefined') {\n        content.push({\n            tag: 'currency',\n            attrs: {},\n            content: Buffer.from(product.currency)\n        });\n    }\n    if ('originCountryCode' in product) {\n        if (typeof product.originCountryCode === 'undefined') {\n            attrs['compliance_category'] = 'COUNTRY_ORIGIN_EXEMPT';\n        }\n        else {\n            content.push({\n                tag: 'compliance_info',\n                attrs: {},\n                content: [\n                    {\n                        tag: 'country_code_origin',\n                        attrs: {},\n                        content: Buffer.from(product.originCountryCode)\n                    }\n                ]\n            });\n        }\n    }\n    if (typeof product.isHidden !== 'undefined') {\n        attrs['is_hidden'] = product.isHidden.toString();\n    }\n    const node = {\n        tag: 'product',\n        attrs,\n        content\n    };\n    return node;\n};\nexports.toProductNode = toProductNode;\nconst parseProductNode = (productNode) => {\n    const isHidden = productNode.attrs.is_hidden === 'true';\n    const id = (0, WABinary_1.getBinaryNodeChildString)(productNode, 'id');\n    const mediaNode = (0, WABinary_1.getBinaryNodeChild)(productNode, 'media');\n    const statusInfoNode = (0, WABinary_1.getBinaryNodeChild)(productNode, 'status_info');\n    const product = {\n        id,\n        imageUrls: parseImageUrls(mediaNode),\n        reviewStatus: {\n            whatsapp: (0, WABinary_1.getBinaryNodeChildString)(statusInfoNode, 'status'),\n        },\n        availability: 'in stock',\n        name: (0, WABinary_1.getBinaryNodeChildString)(productNode, 'name'),\n        retailerId: (0, WABinary_1.getBinaryNodeChildString)(productNode, 'retailer_id'),\n        url: (0, WABinary_1.getBinaryNodeChildString)(productNode, 'url'),\n        description: (0, WABinary_1.getBinaryNodeChildString)(productNode, 'description'),\n        price: +(0, WABinary_1.getBinaryNodeChildString)(productNode, 'price'),\n        currency: (0, WABinary_1.getBinaryNodeChildString)(productNode, 'currency'),\n        isHidden,\n    };\n    return product;\n};\nexports.parseProductNode = parseProductNode;\n/**\n * Uploads images not already uploaded to WA's servers\n */\nasync function uploadingNecessaryImagesOfProduct(product, waUploadToServer, timeoutMs = 30000) {\n    product = {\n        ...product,\n        images: product.images ? await (0, exports.uploadingNecessaryImages)(product.images, waUploadToServer, timeoutMs) : product.images\n    };\n    return product;\n}\nexports.uploadingNecessaryImagesOfProduct = uploadingNecessaryImagesOfProduct;\n/**\n * Uploads images not already uploaded to WA's servers\n */\nconst uploadingNecessaryImages = async (images, waUploadToServer, timeoutMs = 30000) => {\n    const results = await Promise.all(images.map(async (img) => {\n        if ('url' in img) {\n            const url = img.url.toString();\n            if (url.includes('.whatsapp.net')) {\n                return { url };\n            }\n        }\n        const { stream } = await (0, messages_media_1.getStream)(img);\n        const hasher = (0, crypto_1.createHash)('sha256');\n        const contentBlocks = [];\n        for await (const block of stream) {\n            hasher.update(block);\n            contentBlocks.push(block);\n        }\n        const sha = hasher.digest('base64');\n        const { directPath } = await waUploadToServer((0, messages_media_1.toReadable)(Buffer.concat(contentBlocks)), {\n            mediaType: 'product-catalog-image',\n            fileEncSha256B64: sha,\n            timeoutMs\n        });\n        return { url: (0, messages_media_1.getUrlFromDirectPath)(directPath) };\n    }));\n    return results;\n};\nexports.uploadingNecessaryImages = uploadingNecessaryImages;\nconst parseImageUrls = (mediaNode) => {\n    const imgNode = (0, WABinary_1.getBinaryNodeChild)(mediaNode, 'image');\n    return {\n        requested: (0, WABinary_1.getBinaryNodeChildString)(imgNode, 'request_image_url'),\n        original: (0, WABinary_1.getBinaryNodeChildString)(imgNode, 'original_image_url')\n    };\n};\nconst parseStatusInfo = (mediaNode) => {\n    const node = (0, WABinary_1.getBinaryNodeChild)(mediaNode, 'status_info');\n    return {\n        status: (0, WABinary_1.getBinaryNodeChildString)(node, 'status'),\n        canAppeal: (0, WABinary_1.getBinaryNodeChildString)(node, 'can_appeal') === 'true',\n    };\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}