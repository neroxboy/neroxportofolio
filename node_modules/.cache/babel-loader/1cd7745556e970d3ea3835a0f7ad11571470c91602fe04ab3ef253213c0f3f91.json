{"ast":null,"code":"const SenderKeyState = require('./sender_key_state');\nclass SenderKeyRecord {\n  MAX_STATES = 5;\n  constructor(serialized) {\n    this.senderKeyStates = [];\n    if (serialized) {\n      const list = serialized;\n      for (let i = 0; i < list.length; i++) {\n        const structure = list[i];\n        this.senderKeyStates.push(new SenderKeyState(null, null, null, null, null, null, structure));\n      }\n    }\n  }\n  isEmpty() {\n    return this.senderKeyStates.length === 0;\n  }\n  getSenderKeyState(keyId) {\n    if (!keyId && this.senderKeyStates.length) return this.senderKeyStates[this.senderKeyStates.length - 1];\n    for (let i = 0; i < this.senderKeyStates.length; i++) {\n      const state = this.senderKeyStates[i];\n      if (state.getKeyId() === keyId) {\n        return state;\n      }\n    }\n  }\n  addSenderKeyState(id, iteration, chainKey, signatureKey) {\n    this.senderKeyStates.push(new SenderKeyState(id, iteration, chainKey, null, signatureKey));\n    if (this.senderKeyStates.length > 5) {\n      this.senderKeyStates.shift();\n    }\n  }\n  setSenderKeyState(id, iteration, chainKey, keyPair) {\n    this.senderKeyStates.length = 0;\n    this.senderKeyStates.push(new SenderKeyState(id, iteration, chainKey, keyPair));\n  }\n  serialize() {\n    const recordStructure = [];\n    for (let i = 0; i < this.senderKeyStates.length; i++) {\n      const senderKeyState = this.senderKeyStates[i];\n      recordStructure.push(senderKeyState.getStructure());\n    }\n    return recordStructure;\n  }\n}\nmodule.exports = SenderKeyRecord;","map":{"version":3,"names":["SenderKeyState","require","SenderKeyRecord","MAX_STATES","constructor","serialized","senderKeyStates","list","i","length","structure","push","isEmpty","getSenderKeyState","keyId","state","getKeyId","addSenderKeyState","id","iteration","chainKey","signatureKey","shift","setSenderKeyState","keyPair","serialize","recordStructure","senderKeyState","getStructure","module","exports"],"sources":["C:/Users/vanitas/node_modules/@whiskeysockets/baileys/WASignalGroup/sender_key_record.js"],"sourcesContent":["const SenderKeyState = require('./sender_key_state');\n\nclass SenderKeyRecord {\n    MAX_STATES = 5;\n  \n    constructor(serialized) {\n      this.senderKeyStates = [];\n  \n      if (serialized) {\n        const list = serialized;\n        for (let i = 0; i < list.length; i++) {\n          const structure = list[i];\n          this.senderKeyStates.push(\n            new SenderKeyState(null, null, null, null, null, null, structure)\n          );\n        }\n      }\n    }\n  \n    isEmpty() {\n      return this.senderKeyStates.length === 0;\n    }\n  \n    getSenderKeyState(keyId) {\n      if (!keyId && this.senderKeyStates.length) return this.senderKeyStates[this.senderKeyStates.length - 1];\n      for (let i = 0; i < this.senderKeyStates.length; i++) {\n        const state = this.senderKeyStates[i];\n        if (state.getKeyId() === keyId) {\n          return state;\n        }\n      }\n    }\n  \n    addSenderKeyState(id, iteration, chainKey, signatureKey) {\n      this.senderKeyStates.push(new SenderKeyState(id, iteration, chainKey, null, signatureKey));\n      if (this.senderKeyStates.length > 5) {\n        this.senderKeyStates.shift()\n      }\n    }\n  \n    setSenderKeyState(id, iteration, chainKey, keyPair) {\n      this.senderKeyStates.length = 0;\n      this.senderKeyStates.push(new SenderKeyState(id, iteration, chainKey, keyPair));\n    }\n  \n    serialize() {\n      const recordStructure = [];\n      for (let i = 0; i < this.senderKeyStates.length; i++) {\n        const senderKeyState = this.senderKeyStates[i];\n        recordStructure.push(senderKeyState.getStructure());\n      }\n      return recordStructure;\n    }\n  }\n  \n  module.exports = SenderKeyRecord;"],"mappings":"AAAA,MAAMA,cAAc,GAAGC,OAAO,CAAC,oBAAoB,CAAC;AAEpD,MAAMC,eAAe,CAAC;EAClBC,UAAU,GAAG,CAAC;EAEdC,WAAWA,CAACC,UAAU,EAAE;IACtB,IAAI,CAACC,eAAe,GAAG,EAAE;IAEzB,IAAID,UAAU,EAAE;MACd,MAAME,IAAI,GAAGF,UAAU;MACvB,KAAK,IAAIG,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGD,IAAI,CAACE,MAAM,EAAED,CAAC,EAAE,EAAE;QACpC,MAAME,SAAS,GAAGH,IAAI,CAACC,CAAC,CAAC;QACzB,IAAI,CAACF,eAAe,CAACK,IAAI,CACvB,IAAIX,cAAc,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAEU,SAAS,CAClE,CAAC;MACH;IACF;EACF;EAEAE,OAAOA,CAAA,EAAG;IACR,OAAO,IAAI,CAACN,eAAe,CAACG,MAAM,KAAK,CAAC;EAC1C;EAEAI,iBAAiBA,CAACC,KAAK,EAAE;IACvB,IAAI,CAACA,KAAK,IAAI,IAAI,CAACR,eAAe,CAACG,MAAM,EAAE,OAAO,IAAI,CAACH,eAAe,CAAC,IAAI,CAACA,eAAe,CAACG,MAAM,GAAG,CAAC,CAAC;IACvG,KAAK,IAAID,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,IAAI,CAACF,eAAe,CAACG,MAAM,EAAED,CAAC,EAAE,EAAE;MACpD,MAAMO,KAAK,GAAG,IAAI,CAACT,eAAe,CAACE,CAAC,CAAC;MACrC,IAAIO,KAAK,CAACC,QAAQ,CAAC,CAAC,KAAKF,KAAK,EAAE;QAC9B,OAAOC,KAAK;MACd;IACF;EACF;EAEAE,iBAAiBA,CAACC,EAAE,EAAEC,SAAS,EAAEC,QAAQ,EAAEC,YAAY,EAAE;IACvD,IAAI,CAACf,eAAe,CAACK,IAAI,CAAC,IAAIX,cAAc,CAACkB,EAAE,EAAEC,SAAS,EAAEC,QAAQ,EAAE,IAAI,EAAEC,YAAY,CAAC,CAAC;IAC1F,IAAI,IAAI,CAACf,eAAe,CAACG,MAAM,GAAG,CAAC,EAAE;MACnC,IAAI,CAACH,eAAe,CAACgB,KAAK,CAAC,CAAC;IAC9B;EACF;EAEAC,iBAAiBA,CAACL,EAAE,EAAEC,SAAS,EAAEC,QAAQ,EAAEI,OAAO,EAAE;IAClD,IAAI,CAAClB,eAAe,CAACG,MAAM,GAAG,CAAC;IAC/B,IAAI,CAACH,eAAe,CAACK,IAAI,CAAC,IAAIX,cAAc,CAACkB,EAAE,EAAEC,SAAS,EAAEC,QAAQ,EAAEI,OAAO,CAAC,CAAC;EACjF;EAEAC,SAASA,CAAA,EAAG;IACV,MAAMC,eAAe,GAAG,EAAE;IAC1B,KAAK,IAAIlB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,IAAI,CAACF,eAAe,CAACG,MAAM,EAAED,CAAC,EAAE,EAAE;MACpD,MAAMmB,cAAc,GAAG,IAAI,CAACrB,eAAe,CAACE,CAAC,CAAC;MAC9CkB,eAAe,CAACf,IAAI,CAACgB,cAAc,CAACC,YAAY,CAAC,CAAC,CAAC;IACrD;IACA,OAAOF,eAAe;EACxB;AACF;AAEAG,MAAM,CAACC,OAAO,GAAG5B,eAAe","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}