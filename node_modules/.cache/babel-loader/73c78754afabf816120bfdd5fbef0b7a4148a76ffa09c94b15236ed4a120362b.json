{"ast":null,"code":"import React,{useState}from'react';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const SearchMusic=_ref=>{let{clientId,clientSecret}=_ref;const[trackId,setTrackId]=useState('0o9zmvc5f3EFApU52PPIyW');// ID lagu default\nconst[searchQuery,setSearchQuery]=useState('');const[suggestions,setSuggestions]=useState([]);const getAccessToken=async()=>{const response=await axios.post('https://accounts.spotify.com/api/token',null,{headers:{'Content-Type':'application/x-www-form-urlencoded','Authorization':'Basic '+btoa(\"\".concat(clientId,\":\").concat(clientSecret))},params:{grant_type:'client_credentials'}});return response.data.access_token;};const searchTrack=async query=>{const token=await getAccessToken();const response=await axios.get('https://api.spotify.com/v1/search',{headers:{'Authorization':\"Bearer \".concat(token)},params:{q:query,type:'track',limit:5}});if(response.data.tracks.items.length>0){setSuggestions(response.data.tracks.items);}};const handleSearch=e=>{e.preventDefault();searchTrack(searchQuery);};const handleSuggestionClick=id=>{setTrackId(id);setSuggestions([]);};return/*#__PURE__*/_jsxs(\"div\",{className:\"spotify-player\",children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSearch,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:searchQuery,onChange:e=>setSearchQuery(e.target.value),placeholder:\"Cari lagu di Spotify\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Cari\"})]}),suggestions.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"suggestions\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Did you mean:\"}),/*#__PURE__*/_jsx(\"ul\",{children:suggestions.map(track=>/*#__PURE__*/_jsxs(\"li\",{onClick:()=>handleSuggestionClick(track.id),children:[track.name,\" - \",track.artists.map(artist=>artist.name).join(', ')]},track.id))})]}),/*#__PURE__*/_jsx(\"iframe\",{src:\"https://open.spotify.com/embed/track/\".concat(trackId,\"?autoplay=true\"),width:\"300\",height:\"80\",frameBorder:\"0\",allow:\"encrypted-media\",title:\"Spotify Player\"})]});};export default SearchMusic;","map":{"version":3,"names":["React","useState","axios","jsx","_jsx","jsxs","_jsxs","SearchMusic","_ref","clientId","clientSecret","trackId","setTrackId","searchQuery","setSearchQuery","suggestions","setSuggestions","getAccessToken","response","post","headers","btoa","concat","params","grant_type","data","access_token","searchTrack","query","token","get","q","type","limit","tracks","items","length","handleSearch","e","preventDefault","handleSuggestionClick","id","className","children","onSubmit","value","onChange","target","placeholder","map","track","onClick","name","artists","artist","join","src","width","height","frameBorder","allow","title"],"sources":["C:/Users/vanitas/Downloads/tesskil/src/SearchMusic.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport axios from 'axios';\r\n\r\nconst SearchMusic = ({ clientId, clientSecret }) => {\r\n  const [trackId, setTrackId] = useState('0o9zmvc5f3EFApU52PPIyW'); // ID lagu default\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [suggestions, setSuggestions] = useState([]);\r\n\r\n  const getAccessToken = async () => {\r\n    const response = await axios.post('https://accounts.spotify.com/api/token', null, {\r\n      headers: {\r\n        'Content-Type': 'application/x-www-form-urlencoded',\r\n        'Authorization': 'Basic ' + btoa(`${clientId}:${clientSecret}`)\r\n      },\r\n      params: {\r\n        grant_type: 'client_credentials'\r\n      }\r\n    });\r\n    return response.data.access_token;\r\n  };\r\n\r\n  const searchTrack = async (query) => {\r\n    const token = await getAccessToken();\r\n    const response = await axios.get('https://api.spotify.com/v1/search', {\r\n      headers: {\r\n        'Authorization': `Bearer ${token}`\r\n      },\r\n      params: {\r\n        q: query,\r\n        type: 'track',\r\n        limit: 5\r\n      }\r\n    });\r\n    if (response.data.tracks.items.length > 0) {\r\n      setSuggestions(response.data.tracks.items);\r\n    }\r\n  };\r\n\r\n  const handleSearch = (e) => {\r\n    e.preventDefault();\r\n    searchTrack(searchQuery);\r\n  };\r\n\r\n  const handleSuggestionClick = (id) => {\r\n    setTrackId(id);\r\n    setSuggestions([]);\r\n  };\r\n\r\n  return (\r\n    <div className=\"spotify-player\">\r\n      <form onSubmit={handleSearch}>\r\n        <input\r\n          type=\"text\"\r\n          value={searchQuery}\r\n          onChange={(e) => setSearchQuery(e.target.value)}\r\n          placeholder=\"Cari lagu di Spotify\"\r\n        />\r\n        <button type=\"submit\">Cari</button>\r\n      </form>\r\n      {suggestions.length > 0 && (\r\n        <div className=\"suggestions\">\r\n          <p>Did you mean:</p>\r\n          <ul>\r\n            {suggestions.map((track) => (\r\n              <li key={track.id} onClick={() => handleSuggestionClick(track.id)}>\r\n                {track.name} - {track.artists.map(artist => artist.name).join(', ')}\r\n              </li>\r\n            ))}\r\n          </ul>\r\n        </div>\r\n      )}\r\n      <iframe\r\n        src={`https://open.spotify.com/embed/track/${trackId}?autoplay=true`}\r\n        width=\"300\"\r\n        height=\"80\"\r\n        frameBorder=\"0\"\r\n        allow=\"encrypted-media\"\r\n        title=\"Spotify Player\"\r\n      ></iframe>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SearchMusic;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}