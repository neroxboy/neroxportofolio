{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\vanitas\\\\Downloads\\\\tesskil\\\\src\\\\ChatRoom.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport axios from 'axios';\n\n// Fungsi Utilitas\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction formatResponse(response) {\n  if (!response) return \"Maaf, saya tidak dapat memberikan jawaban saat ini.\";\n  return response.trim().replace(/\\*\\*([^\\*]+)\\*\\*/g, \"*$1*\");\n}\n\n// Fungsi Utama Chat\nasync function chat(userMessage) {\n  const apiUrl = 'https://gemini-api-5k0h.onrender.com/gemini/chat';\n  const params = {\n    q: userMessage\n  };\n  let attempts = 0;\n  while (true) {\n    try {\n      attempts++;\n      const response = await axios.get(apiUrl, {\n        params\n      });\n      if (response.data) {\n        return formatResponse(response.data.content);\n      }\n    } catch (error) {\n      console.error(`Mohon maaf ada kesalahan ke-${attempts}:`, error.message);\n    }\n  }\n}\nconst ChatRoom = () => {\n  _s();\n  const [messages, setMessages] = useState([]);\n  const [input, setInput] = useState('');\n  const handleSendMessage = async () => {\n    if (!input.trim()) return;\n    const userMessage = input.trim();\n    setMessages([...messages, {\n      role: 'user',\n      content: userMessage\n    }]);\n    setInput('');\n    const response = await chat(userMessage);\n    setMessages([...messages, {\n      role: 'user',\n      content: userMessage\n    }, {\n      role: 'assistant',\n      content: response\n    }]);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chat-room\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"messages\",\n      children: messages.map((msg, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `message ${msg.role}`,\n        children: msg.content\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 21\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"input-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n        value: input,\n        onChange: e => setInput(e.target.value),\n        placeholder: \"Ketik pesan Anda di sini...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleSendMessage,\n        children: \"Kirim\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 9\n  }, this);\n};\n_s(ChatRoom, \"HDAtGPGcvWga1zf1TBXg51T+tsc=\");\n_c = ChatRoom;\nexport default ChatRoom;\nvar _c;\n$RefreshReg$(_c, \"ChatRoom\");","map":{"version":3,"names":["React","useState","axios","jsxDEV","_jsxDEV","formatResponse","response","trim","replace","chat","userMessage","apiUrl","params","q","attempts","get","data","content","error","console","message","ChatRoom","_s","messages","setMessages","input","setInput","handleSendMessage","role","className","children","map","msg","index","fileName","_jsxFileName","lineNumber","columnNumber","value","onChange","e","target","placeholder","onClick","_c","$RefreshReg$"],"sources":["C:/Users/vanitas/Downloads/tesskil/src/ChatRoom.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport axios from 'axios';\r\n\r\n// Fungsi Utilitas\r\nfunction formatResponse(response) {\r\n    if (!response) return \"Maaf, saya tidak dapat memberikan jawaban saat ini.\";\r\n    return response.trim().replace(/\\*\\*([^\\*]+)\\*\\*/g, \"*$1*\");\r\n}\r\n\r\n// Fungsi Utama Chat\r\nasync function chat(userMessage) {\r\n    const apiUrl = 'https://gemini-api-5k0h.onrender.com/gemini/chat';\r\n    const params = { q: userMessage };\r\n\r\n    let attempts = 0;\r\n    while (true) {\r\n        try {\r\n            attempts++;\r\n            const response = await axios.get(apiUrl, { params });\r\n            if (response.data) {\r\n                return formatResponse(response.data.content);\r\n            }\r\n        } catch (error) {\r\n            console.error(`Mohon maaf ada kesalahan ke-${attempts}:`, error.message);\r\n        }\r\n    }\r\n}\r\n\r\nconst ChatRoom = () => {\r\n    const [messages, setMessages] = useState([]);\r\n    const [input, setInput] = useState('');\r\n\r\n    const handleSendMessage = async () => {\r\n        if (!input.trim()) return;\r\n\r\n        const userMessage = input.trim();\r\n        setMessages([...messages, { role: 'user', content: userMessage }]);\r\n        setInput('');\r\n\r\n        const response = await chat(userMessage);\r\n\r\n        setMessages([...messages, { role: 'user', content: userMessage }, { role: 'assistant', content: response }]);\r\n    };\r\n\r\n    return (\r\n        <div className=\"chat-room\">\r\n            <div className=\"messages\">\r\n                {messages.map((msg, index) => (\r\n                    <div key={index} className={`message ${msg.role}`}>\r\n                        {msg.content}\r\n                    </div>\r\n                ))}\r\n            </div>\r\n            <div className=\"input-container\">\r\n                <textarea\r\n                    value={input}\r\n                    onChange={(e) => setInput(e.target.value)}\r\n                    placeholder=\"Ketik pesan Anda di sini...\"\r\n                ></textarea>\r\n                <button onClick={handleSendMessage}>Kirim</button>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ChatRoom;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}