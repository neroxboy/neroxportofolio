{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\vanitas\\\\Downloads\\\\tesskil\\\\src\\\\ChatRoom.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport axios from 'axios';\nimport { useSpring, animated } from '@react-spring/web';\n\n// Konstanta\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SYSTEM_PROMPT = `Kamu adalah Neroxz ðŸŒŸ, asisten cerdas dari NEROXOFFC. Versi 1.0. Tugasmu adalah memberikan jawaban yang selalu berbeda untuk setiap pengguna, meskipun pertanyaannya sama. Jangan lupa untuk menggunakan penebalan pada poin penting dan menyebut nama pengguna jika tersedia. Jaga setiap interaksi tetap segar dan unik!, dan jika bertanya soal owner kamu 087785580617 adalah nomornya, dan pencipta asli kamu adalah Nerox.`;\nconst ChatRoom = () => {\n  _s();\n  const [messages, setMessages] = useState([]);\n  const [input, setInput] = useState('');\n  const [sessionId, setSessionId] = useState('');\n  const textareaRef = useRef(null);\n  const messagesEndRef = useRef(null);\n  useEffect(() => {\n    // Generate a unique session ID for each user\n    const id = localStorage.getItem('sessionId') || `session-${Date.now()}`;\n    localStorage.setItem('sessionId', id);\n    setSessionId(id);\n\n    // Load session messages if they exist\n    const savedMessages = localStorage.getItem(`messages-${id}`);\n    if (savedMessages) {\n      setMessages(JSON.parse(savedMessages));\n    } else {\n      // Save the system prompt in session storage\n      localStorage.setItem(`systemPrompt-${id}`, SYSTEM_PROMPT);\n    }\n  }, []);\n  useEffect(() => {\n    var _messagesEndRef$curre;\n    // Scroll to the bottom of the messages container\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: 'smooth'\n    });\n  }, [messages]);\n  const formatResponse = response => {\n    if (!response) return \"Maaf, saya tidak dapat memberikan jawaban saat ini.\";\n    return response.trim().replace(/\\*\\*([^*]+)\\*\\*/g, \"*$1*\").replace(/\\n/g, '<br/>');\n  };\n  const chat = async userMessage => {\n    const apiUrl = 'https://gemini-api-5k0h.onrender.com/gemini/chat';\n    const systemPrompt = localStorage.getItem(`systemPrompt-${sessionId}`);\n    const prompt = userMessage.toLowerCase().includes('nama') || userMessage.toLowerCase().includes('author') || userMessage.toLowerCase().includes('nomor') ? systemPrompt : '';\n    const params = {\n      q: `${prompt}\\n\\nUser: ${userMessage}`\n    };\n    try {\n      const response = await axios.get(apiUrl, {\n        params\n      });\n      if (response.data) {\n        return formatResponse(response.data.content);\n      }\n    } catch (error) {\n      console.error(`Mohon maaf ada kesalahan:`, error.message);\n      return \"Maaf, saya tidak dapat memberikan jawaban saat ini.\";\n    }\n  };\n  const handleSendMessage = async () => {\n    if (!input.trim()) return;\n    const userMessage = input.trim();\n    const newMessages = [...messages, {\n      role: 'user',\n      content: userMessage\n    }];\n    setMessages(newMessages);\n    setInput('');\n    const response = await chat(userMessage);\n    const updatedMessages = [...newMessages, {\n      role: 'assistant',\n      content: response\n    }];\n    setMessages(updatedMessages);\n\n    // Save session messages\n    localStorage.setItem(`messages-${sessionId}`, JSON.stringify(updatedMessages));\n  };\n  const handleInput = e => {\n    setInput(e.target.value);\n    textareaRef.current.style.height = 'auto';\n    textareaRef.current.style.height = `${textareaRef.current.scrollHeight}px`;\n  };\n  const handleKeyPress = e => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSendMessage();\n    }\n  };\n  const messageAnimation = useSpring({\n    opacity: 1,\n    transform: 'translateY(0)',\n    from: {\n      opacity: 0,\n      transform: 'translateY(20px)'\n    }\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chat-room\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"messages\",\n      children: [messages.map((msg, index) => /*#__PURE__*/_jsxDEV(animated.div, {\n        style: messageAnimation,\n        className: `message ${msg.role}`,\n        dangerouslySetInnerHTML: {\n          __html: msg.content\n        }\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 21\n      }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: messagesEndRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"input-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n        ref: textareaRef,\n        value: input,\n        onChange: handleInput,\n        onKeyPress: handleKeyPress,\n        placeholder: \"Ketik pesan Anda di sini...\",\n        rows: 1\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleSendMessage,\n        children: \"Kirim\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 94,\n    columnNumber: 9\n  }, this);\n};\n_s(ChatRoom, \"w24ovsB0kjQEMKLHRciZS5ktkWQ=\", false, function () {\n  return [useSpring];\n});\n_c = ChatRoom;\nexport default ChatRoom;\nvar _c;\n$RefreshReg$(_c, \"ChatRoom\");","map":{"version":3,"names":["React","useState","useEffect","useRef","axios","useSpring","animated","jsxDEV","_jsxDEV","SYSTEM_PROMPT","ChatRoom","_s","messages","setMessages","input","setInput","sessionId","setSessionId","textareaRef","messagesEndRef","id","localStorage","getItem","Date","now","setItem","savedMessages","JSON","parse","_messagesEndRef$curre","current","scrollIntoView","behavior","formatResponse","response","trim","replace","chat","userMessage","apiUrl","systemPrompt","prompt","toLowerCase","includes","params","q","get","data","content","error","console","message","handleSendMessage","newMessages","role","updatedMessages","stringify","handleInput","e","target","value","style","height","scrollHeight","handleKeyPress","key","shiftKey","preventDefault","messageAnimation","opacity","transform","from","className","children","map","msg","index","div","dangerouslySetInnerHTML","__html","fileName","_jsxFileName","lineNumber","columnNumber","ref","onChange","onKeyPress","placeholder","rows","onClick","_c","$RefreshReg$"],"sources":["C:/Users/vanitas/Downloads/tesskil/src/ChatRoom.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport axios from 'axios';\r\nimport { useSpring, animated } from '@react-spring/web';\r\n\r\n// Konstanta\r\nconst SYSTEM_PROMPT = `Kamu adalah Neroxz ðŸŒŸ, asisten cerdas dari NEROXOFFC. Versi 1.0. Tugasmu adalah memberikan jawaban yang selalu berbeda untuk setiap pengguna, meskipun pertanyaannya sama. Jangan lupa untuk menggunakan penebalan pada poin penting dan menyebut nama pengguna jika tersedia. Jaga setiap interaksi tetap segar dan unik!, dan jika bertanya soal owner kamu 087785580617 adalah nomornya, dan pencipta asli kamu adalah Nerox.`;\r\n\r\nconst ChatRoom = () => {\r\n    const [messages, setMessages] = useState([]);\r\n    const [input, setInput] = useState('');\r\n    const [sessionId, setSessionId] = useState('');\r\n    const textareaRef = useRef(null);\r\n    const messagesEndRef = useRef(null);\r\n\r\n    useEffect(() => {\r\n        // Generate a unique session ID for each user\r\n        const id = localStorage.getItem('sessionId') || `session-${Date.now()}`;\r\n        localStorage.setItem('sessionId', id);\r\n        setSessionId(id);\r\n\r\n        // Load session messages if they exist\r\n        const savedMessages = localStorage.getItem(`messages-${id}`);\r\n        if (savedMessages) {\r\n            setMessages(JSON.parse(savedMessages));\r\n        } else {\r\n            // Save the system prompt in session storage\r\n            localStorage.setItem(`systemPrompt-${id}`, SYSTEM_PROMPT);\r\n        }\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        // Scroll to the bottom of the messages container\r\n        messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n    }, [messages]);\r\n\r\n    const formatResponse = (response) => {\r\n        if (!response) return \"Maaf, saya tidak dapat memberikan jawaban saat ini.\";\r\n        return response.trim().replace(/\\*\\*([^*]+)\\*\\*/g, \"*$1*\").replace(/\\n/g, '<br/>');\r\n    };\r\n\r\n    const chat = async (userMessage) => {\r\n        const apiUrl = 'https://gemini-api-5k0h.onrender.com/gemini/chat';\r\n        const systemPrompt = localStorage.getItem(`systemPrompt-${sessionId}`);\r\n        const prompt = userMessage.toLowerCase().includes('nama') || userMessage.toLowerCase().includes('author') || userMessage.toLowerCase().includes('nomor') ? systemPrompt : '';\r\n        const params = { q: `${prompt}\\n\\nUser: ${userMessage}` };\r\n\r\n        try {\r\n            const response = await axios.get(apiUrl, { params });\r\n            if (response.data) {\r\n                return formatResponse(response.data.content);\r\n            }\r\n        } catch (error) {\r\n            console.error(`Mohon maaf ada kesalahan:`, error.message);\r\n            return \"Maaf, saya tidak dapat memberikan jawaban saat ini.\";\r\n        }\r\n    };\r\n\r\n    const handleSendMessage = async () => {\r\n        if (!input.trim()) return;\r\n\r\n        const userMessage = input.trim();\r\n        const newMessages = [...messages, { role: 'user', content: userMessage }];\r\n        setMessages(newMessages);\r\n        setInput('');\r\n\r\n        const response = await chat(userMessage);\r\n        const updatedMessages = [...newMessages, { role: 'assistant', content: response }];\r\n        setMessages(updatedMessages);\r\n\r\n        // Save session messages\r\n        localStorage.setItem(`messages-${sessionId}`, JSON.stringify(updatedMessages));\r\n    };\r\n\r\n    const handleInput = (e) => {\r\n        setInput(e.target.value);\r\n        textareaRef.current.style.height = 'auto';\r\n        textareaRef.current.style.height = `${textareaRef.current.scrollHeight}px`;\r\n    };\r\n\r\n    const handleKeyPress = (e) => {\r\n        if (e.key === 'Enter' && !e.shiftKey) {\r\n            e.preventDefault();\r\n            handleSendMessage();\r\n        }\r\n    };\r\n\r\n    const messageAnimation = useSpring({\r\n        opacity: 1,\r\n        transform: 'translateY(0)',\r\n        from: { opacity: 0, transform: 'translateY(20px)' },\r\n    });\r\n\r\n    return (\r\n        <div className=\"chat-room\">\r\n            <div className=\"messages\">\r\n                {messages.map((msg, index) => (\r\n                    <animated.div key={index} style={messageAnimation} className={`message ${msg.role}`} dangerouslySetInnerHTML={{ __html: msg.content }}>\r\n                    </animated.div>\r\n                ))}\r\n                <div ref={messagesEndRef} />\r\n            </div>\r\n            <div className=\"input-container\">\r\n                <textarea\r\n                    ref={textareaRef}\r\n                    value={input}\r\n                    onChange={handleInput}\r\n                    onKeyPress={handleKeyPress}\r\n                    placeholder=\"Ketik pesan Anda di sini...\"\r\n                    rows={1}\r\n                ></textarea>\r\n                <button onClick={handleSendMessage}>Kirim</button>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ChatRoom;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}